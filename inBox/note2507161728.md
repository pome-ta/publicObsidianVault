ã‚‚ã†é¢å€’ã ã‹ã‚‰ã€å…¨éƒ¨æ›¸ãè½ã¨ã—ã¦ã„ãã‹

# ğŸ“ 2025/08/24

## codemirror ã®esm.sh

ã•ã¦ã€ã©ã‚Œã‚’å‘¼ã‚“ã§ã„ãã‹ã€ã€ã€


# ğŸ“ 2025/08/21

## todo ?

- ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é¸æŠã§ãã‚‹ã‚ˆã†ã«ï¼Ÿ
- `v0.1` ã®éŸ³ãƒ‡ãƒ¼ã‚¿ã®å¤–éƒ¨èª­ã¿è¾¼ã¿
- ems.sh ã§codemirror çµ„ã‚“ã§ã¿ã‚‹
    - ã‚­ãƒ£ãƒ¬ãƒƒãƒˆãŒã§å‡ºã¦ãã‚‹ã¾ã§æˆ»ã™
    - ãã‚Œã§ç›¸äº’äº’æ›æ€§ãŒä¿ã¦ã‚‹ã‹
- [GitHub - tkihira/web-console-log](https://github.com/tkihira/web-console-log) æ¤œè¨¼

# ğŸ“ 2025/08/20

- [GitHub - processing/p5.sound](https://github.com/processing/p5.sound.js)
- [GitHub - Tonejs/Tone.js: A Web Audio framework for making interactive music in the browser.](https://github.com/Tonejs/Tone.js)

`v0.2` ã¯ã€ã¾ã å…ˆã‹ãªãã€ã€ã€

éŸ³æ­¢ã‚ãŸã‚Šã™ã‚‹ã®ãŒã€å…¨ãé•ã†ã‹ã‚‚ã€‚

# ğŸ“ 2025/08/16

gas ã®éåŒæœŸå®Ÿè¡Œã®ã‚„ã¤ã€ã¾ã¨ã‚ã¦ãŠããŸã„ã€‚ã—ã‹ã—ã€å®Ÿéš›ã«èµ°ã‚‹ã‚³ãƒ¼ãƒ‰è¦‹ãªãŒã‚‰ã§ãªã„ã¨ã€é›£ã—ã„ãªã€‚ã€‚ã€‚

## å‚ç…§ã‚ã•ã‚Š

- [Make google.script.run looks a promise Â· GitHub](https://gist.github.com/torufurukawa/64339baf16efd3598e71dd763d1db0cf)
    - ã“ã‚Œã§ã„ã„ã‚“ã ã£ã‘ï¼Ÿ
- [Asynchronous execution for Google App Scripts (gas) Â· GitHub](https://gist.github.com/sdesalas/2972f8647897d5481fd8e01f03122805)
    - ã“ã£ã¡ã®æ–¹ãŒå¤šãå¼•ã£ã‹ã‹ã‚‹ï¼Ÿ
- [ã€GASã®èµ·å‹•æ™‚é–“ã®åˆ¶é™ã‚’å›é¿ã›ã‚ˆã€‘åˆ†å‰²å®Ÿè¡Œã‚„éåŒæœŸå‡¦ç†ã‚’ä½¿ã£ã¦é«˜é€Ÿå®Ÿè¡Œã‚’å®Ÿç¾ã—ã¦ã¿ãŸï¼ - ãƒãƒ³ã‚³ãƒ„ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ã”ã˜ã‚ƒã£ãºé–‹ç™ºæ—¥è¨˜ã€‚](https://www.pnkts.net/2019/12/25/gas-split-execution-and-_asynchronous-processing)
- [GASã®é–¢æ•°ã‚’Promiseã§ãƒ©ãƒƒãƒ—ã™ã‚‹ (é­”æ³•ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆProxy) #JavaScript - Qiita](https://qiita.com/Shankou/items/7b73686c3aa9364c20ce)
    - `Proxy` ?
    - [Proxy - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Proxy)


## ã‚‚ã£ã¦ããŸã‚„ã¤

### menu ç³»

```js
const activeSpreadsheet = SpreadsheetApp.getActiveSpreadsheet();

function onOpen() {
  const ui = SpreadsheetApp.getUi();
  ui.createMenu('ğŸ“‚ ScriptMenus')
    .addItem('ä¸€æ‹¬å‡¦ç†', 'customUpdate')
    .addToUi();
}

/**
* ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚ã«èµ°ã‚‹å‡¦ç†
*/
function customUpdate() {
  // xxx: ãƒœã‚¿ãƒ³èª˜å°ã®ã‚³ãƒ³ãƒ†ã‚¯ã‚¹ãƒˆ
  // const selector = Browser.msgBox("ã˜ã£ã“ã†ã™ã‚‹ãƒ¼", "å®Ÿè¡Œã™ã‚‹ã“ã¨ã®æ„å‘³ã‚’ç†è§£ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ", Browser.Buttons.OK_CANCEL);
  // if (selector === 'cancel') {
  // return
  // }
const html = HtmlService.createTemplateFromFile('customUpdate.html').evaluate();
SpreadsheetApp.getUi().showModalDialog(html, 'å‡¦ç†ã‚’æ­¢ã‚ãŸã„å ´åˆã¯[x] æŠ¼ã™ â†’');
}

function getDeploySheetDataList() {
  const dataSheet = activeSpreadsheet.getSheetByName('ç¤¾å“¡ãƒªã‚¹ãƒˆ');
  const lastRow = dataSheet.getLastRow();
  const deployData = dataSheet.getRange(`A2:C${lastRow}`).getValues();
  return deployData
}

/**
* å®Ÿè¡Œãƒ­ã‚°ã®åãå‡ºã—
*/
function setStatusLogs(times, logs) {
  const ws = activeSpreadsheet.insertSheet(`log:${times[0]}`);
  console.log('------------- set')
  SpreadsheetApp.flush();
  ws.getRange('A1:A2').setValues([[times[0]], [times[1]]]);
  const length = logs.length;
  ws.getRange(`B1:E${length}`).setValues(logs);
}
```

### å®Ÿè¡Œã®ã‚³ã‚¢

```html
<!DOCTYPE html>
<html>

<head>
  <base target="_top" />
  <script>
// --- éåŒæœŸå‡¦ç†æº–å‚™
/* gasã®é–¢æ•°ã§ã€Promise ãŒè¿”ã›ã‚‹ã‚ˆã†ã« */
// https://gist.github.com/torufurukawa/64339baf16efd3598e71dd763d1db0cf
function scriptRunPromise() {
  const gs = {};
  const keys = Object.keys(google.script.run);
  for (let i = 0; i < keys.length; i++) {
    gs[keys[i]] = (function (key) {
      return function (...args) {
        return new Promise(function (resolve, reject) {
          google.script.run
            .withSuccessHandler(resolve)
            .withFailureHandler(reject)
            [key].apply(google.script.run, args);
        });
      };
    })(keys[i]);
  }
  return gs;
}

/**
 * ä¸ãˆã‚‰ã‚ŒãŸã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã‹ã‚‰å¾—ã‚‰ã‚Œã‚‹é–¢æ•°ã‚’é †ã«ã€
 * æŒ‡å®šã•ã‚ŒãŸæ•°ã¾ã§ä¸¦åˆ—ã«å®Ÿè¡Œã™ã‚‹ã€‚
 *
 * @param iterable {Iterable<() => Promise<void>}
 *  å®Ÿè¡Œã—ãŸã„é–¢æ•°ã‚’è¦ç´ ã«æŒã¤ã‚¤ãƒ†ãƒ©ãƒ–ãƒ«ã€‚
 *  å„é–¢æ•°ã¯å¼•æ•°ã‚’æŒãŸãšã€Promise ã‚’è¿”ã™ã€‚
 * @param concurrency {number} ã“ã®æ•°ã¾ã§ä¸¦åˆ—ã«å®Ÿè¡Œã™ã‚‹ã€‚
 * @return {Promise<void>}
 *  å…¨ã¦ã®é–¢æ•°ã‚’å®Ÿè¡Œã—çµ‚ãˆã‚‹ã¨ resolve ã•ã‚Œã‚‹ Promiseã€‚
 */
async function runConcurrentlyAsync(iterable, concurrency) {
  const iterator = iterable[Symbol.iterator]();
  let index = 0; // ãƒ­ã‚°ç”¨
  const promises = Array.from({ length: concurrency }, (_, id) => {
    return new Promise(async (resolve) => {
      for (
        let result = iterator.next();
        !result.done;
        result = iterator.next()
      ) {
        const i = index++;
        console.log(`${id}: ${i}...`);
        await result.value();
        console.log(`        ...${id}: ${i}`);
        prgrsbr.value = i; // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ç”¨
      }
      resolve();
    });
  });
  await Promise.all(promises);
}
// --- éåŒæœŸå‡¦ç†æº–å‚™çµ‚ã‚ã‚Š/

let prgrsbr, logDiv; // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ç”¨
let startTimeLog, finishTimeLog;
let statusLogs = [];

window.addEventListener('load', () => {
  console.log('load: start');
  // sv-SEãƒ­ã‚±ãƒ¼ãƒ«ã¯YYYY-MM-DDå½¢å¼ã®æ—¥ä»˜æ–‡å­—åˆ—ã‚’æˆ»ã™
  const _ymd = new Date().toLocaleDateString('sv-SE');
  const _time = new Date().toLocaleTimeString('ja-JP', { hour12: false });
  startTimeLog = `${_ymd}_${_time}`;

  setUpUI();
  // todo: åˆå›ã«ä¸€æ‹¬ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–ã£ã¦ãã‚‹ã¨ã“ã‚
  scriptRunPromise()
    .getDeploySheetDataList()
    .then((resolve) => asyncTouchSheets(resolve));
});
// ã‚¨ãƒªã‚¢ã‚°ãƒ«ãƒ¼ãƒ—åã¨ã€URL ã®é…åˆ—ãŒå…¥ã£ã¦ã„ã‚‹
function asyncTouchSheets(arrayNameURLs) {
  const INIT = 0;
  const MAX = arrayNameURLs.length;
  const CONCURRENCY = 2; // åŒæ™‚å®Ÿè¡Œã§ãã‚‹æ•°ã‚’å®šç¾©
  prgrsbr.max = MAX; // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ç”¨

  const generator = (function* createGenerator() {
    for (let i = INIT; i < MAX; i++) {
      const [staffNum, staffName, mailAddress] = arrayNameURLs[i];
      const idx = i + 1;

      let stateSignal;

      // todo: æœ€çµ‚çš„ã«å®Ÿè¡Œã•ã›ã‚‹é–¢æ•°
      yield async () => {
        try {
          await scriptRunPromise().allCallFunc(
            staffNum,
            staffName,
            mailAddress
          );
          stateSignal = ['ğŸŸ¢', ''];
        } catch (error) {
          stateSignal = ['ğŸ”´', `${error}`];
        } finally {
          addLogText(
            `${stateSignal[0]}\t${idx}:\t${staffNum} \t${stateSignal[1]}`
          );
          statusLogs = [
            ...statusLogs,
            [stateSignal[0], idx, staffNum, stateSignal[1]],
          ];
        }
      };
    }
  })();

  runConcurrentlyAsync(generator, CONCURRENCY).then((resolve) => {
    const _ymd = new Date().toLocaleDateString('sv-SE');
    const _time = new Date().toLocaleTimeString('ja-JP', { hour12: false });
    finishTimeLog = `${_ymd}_${_time}`;

    google.script.run.setStatusLogs([startTimeLog, finishTimeLog], statusLogs);
    google.script.host.close();
  });
}

// é€²æ—ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ä½œæˆç”¨
function addLogText(logWord) {
  const logText = document.createElement('p');
  logText.style.margin = 0;
  logText.style.padding = 0;
  logText.textContent = `${logWord}`;
  // logDiv.appendChild(logText);
  logDiv.prepend(logText);
}

function setUpUI() {
  const wrap = document.createElement('main');
  prgrsbr = document.createElement('progress');
  prgrsbr.style.width = '100%';
  prgrsbr.min = 0;
  prgrsbr.value = 0;
  prgrsbr.style.position = 'sticky';
  prgrsbr.style.top = 0;
  const memo = document.createTextNode('ğŸ˜¤ å‡¦ç†ãŒçµ‚ã‚ã£ãŸã‚‰è‡ªå‹•ã§æ¶ˆãˆã¾ã™');
  logDiv = document.createElement('div');
  logDiv.style.fontSize = '0.8rem';
  document.body.appendChild(wrap);
  wrap.appendChild(prgrsbr);
  wrap.appendChild(memo);
  wrap.appendChild(logDiv);
}

  </script>
</head>

<body></body>

</html>

```

### é€æ¬¡å‡¦ç†

```js
function allCallFunc(num, name, mail) {
  console.log(num);
  const s = SpreadsheetApp.openByUrl(mail);
  s.getSheetByName('a').getRange('A1').getValue()
}

```



## ã†ãƒ¼ã‚“

aside ã¨ã‹clap ã¨ã‹å…¥ã‚Œã¦ã‚„ã£ã¦ã¿ã‚‹ï¼Ÿ


# ğŸ“ 2025/08/12


## p5.sound ã®`reset`

>Â 
`p5.soundOut` is the p5.sound final output bus. It sends output to the destination of this window's web audio context. It contains Web Audio API nodes including a dyanmicsCompressor (<code>.limiter</code>), and Gain Nodes for <code>.input</code> and <code>.output</code>.
> `p5.soundOut` ã¯ p5.sound ã®æœ€çµ‚å‡ºåŠ›ãƒã‚¹ã§ã™ã€‚ã“ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã® Web Audio ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å®›å…ˆã«å‡ºåŠ›ã‚’é€ä¿¡ã—ã¾ã™ã€‚ã“ã®ãƒã‚¹ã«ã¯ã€Web Audio API ãƒãƒ¼ãƒ‰ï¼ˆdynamicsCompressor (<code>.limiter</code>) ã‚’å«ã‚€ï¼‰ã¨ã€<code>.input</code> ãŠã‚ˆã³ <code>.output</code> ç”¨ã® Gain ãƒãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚




# ğŸ“ 2025/08/11

[GitHub - tkihira/web-console-log](https://github.com/tkihira/web-console-log)



# ğŸ“ 2025/08/09

## `p5.Envelope`

[p5.Envelope](https://p5js.org/reference/p5.sound/p5.Envelope/)

play ã¨ã‹trigger ã¨ã‹

ADSR ã®æŒ‡å®šã¨ã€`constructor` ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ã‹





# ğŸ“ 2025/08/02


## p5 sound

- [getOctaveBands](https://p5js.org/reference/p5.FFT/getOctaveBands/)
- [logAverages](https://p5js.org/reference/p5.FFT/logAverages/)

ã“ã“ã‚‰è¾ºã€è‰¯ã„æ„Ÿã˜ã«ã¤ã‹ãˆã‚‹ã®ã‹ã—ã‚‰ï¼Ÿ

## module åŒ–ï¼Ÿ

ãã‚‚ãã‚‚ã€`import` èª­ã¿è¾¼ã¿è¨­å®šã›ã‚“ã¨ã‚ã‹ã‚“ã‹

spectrum analyzer ã¨ã‹ã€å¤§ãããªã£ã¦ã—ã¾ã£ãŸã®ã§ã€åˆ†ã‘ã¦ä½¿ã†ã‹ï¼Ÿ



# ğŸ“ 2025/07/31

ai ã«ã‚³ãƒ¼ãƒ‰èãã‚ˆã†ã«ãªã£ã¦ã‹ã‚‰ã€ã“ã“ã§æ›¸ã‹ãªããªã£ã¦ã‚‹ã‚„

ã‚¹ãƒšã‚¯ãƒˆãƒ©ãƒ ã‚¢ãƒŠãƒ©ã‚¤ã‚¶ãƒ¼ã¨ã—ã¦log ã‚¹ã‚±ãƒ¼ãƒ«ã¨ã‹ã‚‚ã”ã‚‚ã”ã‚„ã£ã¦ã‚‹





# ğŸ“ 2025/07/16

## [GitHub - pome-ta/p5js4codemirror6](https://github.com/pome-ta/p5js4codemirror6) todo


- module åŒ–
    - ä¾å­˜æ¸›ã‚‰ã™
        - å…·ä½“çš„ãªå¤‰æ•°ã§å‚ç…§ã•ã›ãªã„ï¼Ÿ
        - `querySelector` ã‚‚æ¥µåŠ›ä½¿ã‚ãªã„ã¨ã‹
    - è‡ªç”±åº¦é«˜ã
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ç”»é¢
    - å…¨ç”»é¢
        - header ã‚’å‡ºã—ãŸã‚Šã€éš ã—ãŸã‚Š
        - canvas ã®æŒ‡å®šã‚µã‚¤ã‚ºã«ã¯å¿ å®Ÿã§ã‚ã‚ŠãŸã„
- autocomplete
    - p5 ç”¨ã«
    - lsp ã§ãªãã¦ã‚‚ã„ã„
- ã‚¨ãƒ‡ã‚£ã‚¿è¨­å®š
    - ãƒ†ãƒ¼ãƒé–¢ä¿‚ãŒé›‘
- `.css`
    - module ã”ã¨ã®è€ƒãˆæ–¹ã¨ã‹
    - å…¨ä½“ã®ã¯ã€ã»ã¼ä½¿ã‚ãªã„ã¨ã‹ï¼Ÿ
- ã‚¹ã‚±ãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«
    - åˆ‡ã‚Šæ›¿ãˆã§ãã‚‹ã¨è‰¯ãï¼Ÿ
    - ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨ã‹ï¼Ÿ
- console å‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ï¼Ÿ
- éŸ³ã®ãƒã‚¤ã‚º
  - çµ‚äº†æ™‚ã€æ›´æ–°æ™‚ã®ãƒã‚¤ã‚º
  - ã‚¯ãƒªãƒƒãƒ—ãƒã‚¤ã‚ºã‚’ãªã‚‹ã¹ãæ’é™¤ã—ãŸã„