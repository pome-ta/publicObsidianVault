# JavaScript でのDOM 操作やElement 生成（？）って実際どうなのよ？

 Framework やライブラリを使うと、解決する問題かもしれん。

環境上導入は難しいので、生JS でどうにかやっていきたい。
また、複数のファイルを行き来するのも面倒なので、
1つのファイルで完結させたい。となると、
`.js` ファイル内に落とし込みたい。


## いまの書き方

無理やり関数化して、必要そうなのをまとめて書く。

ベタで書くととっ散らかってしまうので、
ブロックごとの管理なイメージ。


### いま思いついたこと

トップレベルで書く場合には、関数宣言を意識する？

- スコープの巻き上げを気にしなくていいから
- `prototype` とか`bind` つかもかも
- ブロックとして管理できる

## 宣言型UI というものがある

React がそれ。ざっと検索してみると、
vanilla でのサンプルがないね。

そもそも、React 側で処理を隠蔽することで、
宣言型UI が達成できているので、
説明がReact になるのはしゃあないか。

宣言型UI をプリミティブに理解するなら、
React をやるのが近道か。
vanilla でやるなら、自作 Framework の準備が必要？


## CSS を書くということで。。。

[リフローとリペイント | DOM操作のベストプラクティス | JavaScriptチュートリアル：基礎から実践まで完全マスターガイド](https://tech-education-nav.com/contents/educational-materials/javascript/dom-manipulation-best-practices#%E3%83%AA%E3%83%95%E3%83%AD%E3%83%BC%E3%81%A8%E3%83%AA%E3%83%9A%E3%82%A4%E3%83%B3%E3%83%88)


ちまちまと書くよりも、ゴリっと書いた方が良さそうか？

```js
element.style.cssText = 'width: 100px; height: 200px; background-color: blue; border: 1px solid black;';
```


## Codemirror エディタのカスタムとして

スマホ対応として、ヘッダーやフッターを生やして、
いい感じに操作できるようにしておきたい。

### もごもごと考えていること

- 自分の達成したい実装に縛られない柔軟性を持った設計にしたい
- よく言われるように、密結合したくない。依存性としていい感じにしたい
- コードの見た目も、スパゲッティにならないように
- 目下の問題
    - ボタン生成は問題なさそう
    - ボタンに付随する`addeventlistener` の扱い
        - `addeventlistener` での関数に引数が必要な場合どうやるんや
        - 

### `reduce` ?

カリー化と`reduce` か？「js 関数 合成」とかで調べてみたり。

- [[javascript]関数の合成 #JavaScript - Qiita](https://qiita.com/hasesiu/items/dbefc1496bc1ba3fa4df)
- [JavaScript:関数を合成する関数 #es6 - Qiita](https://qiita.com/ttatsf/items/ffa0b696bbe11963bd5e)


`DI` ？

- [まだクラスへの依存性注入で消耗してるの？TS製の関数型DIヘルパー「velona」のススメ #TypeScript - Qiita](https://qiita.com/m_mitsuhide/items/34474fcf5402e8606297)
- [[JS]関数型プログラミングでも依存性の注入はできるのか #JavaScript - Qiita](https://qiita.com/jun1s/items/99fdbbd1efffbf90fcf5)

ボタンのElement を関数上でそのまま`return` するとする。
後の`appendChild` 処理を考慮するに、
`class` で生成したインスタンスよりも、DOM 操作のjs として、
理解しやすいかも？という考え。


ボタン生成は、関数でまるっと納めるとして、
生成要素を、配列等のイテレート処理ができる状態でまとめたい。

アイコン表示用の文字列と、`addeventlistener` の処理する関数を、
するっとまとめて列記したいのである。

その場合に、`addeventlistener` で使う関数に、
引数が必要な場合。どうしようかなぁとモゴモゴとしているのである。





#JavaScript #codemirror 